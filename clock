<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>clock</title>
<style>
	canvas {background: #eee;margin:50px;}
</style>
</head>
<body>
	
	<canvas id="canvas" width="400" height="400">
		你的浏览器out啦！
	</canvas>
	<audio id="audio" src="1.wav">
		你的浏览器out啦！
	</audio>
<script>
	window.onload = function(){
		var canvas = document.getElementById('canvas');
		var cobj = canvas.getContext('2d');
		var originx = 200;
		var originy = 200;
		var raduis = 100;
		
		//音频
		var audio = document.getElementById('audio');
		audio.ontimeupdate = function(){
			if (audio.currentTime >=0.1) {
				audio.pause();
			}
		}

		setInterval(function(){

			audio.currentTime=0;
			audio.play();

			//清除画布
			cobj.clearRect(0,0,400,400);

			//阴影
			cobj.shadowColor = '#888';
			cobj.shadowOffsetX = 3;
			cobj.shadowOffsetY = 1;
			cobj.shadowBlur = 3;

			//渐变色
			var colorObj = cobj.createRadialGradient(originx,originy,0,originx,originy,100);
			colorObj.addColorStop(0,"#efefef");
			colorObj.addColorStop(1,"#cecece");

			cobj.fillStyle = colorObj;
			cobj.lineWidth = 8;
			cobj.strokeStyle = colorObj;

			//填充阴影
			cobj.beginPath();
			cobj.arc(originx,originy,raduis,0,2*Math.PI);
			cobj.stroke();
			cobj.fill();

			//去掉阴影
			cobj.shadowColor = '#888';
			cobj.shadowOffsetX = 0;
			cobj.shadowOffsetY = 0;
			cobj.shadowBlur = 0;

			//画刻度
			drakMark();

			//中心小圆
			cobj.shadowColor = '#888';
			cobj.shadowOffsetX = 1;
			cobj.shadowOffsetY = 1;
			cobj.shadowBlur = 3;

			cobj.flllStyle = '#aaa';
			cobj.beginPath();
			cobj.arc(originx,originy,4,0,2*Math.PI);
			cobj.fill();

			//画针
			var date = new Date();
			var h = date.getHours()*30+(date.getMinutes()*6/12)-90;
			var m = date.getMinutes()*6-90;
			var s = date.getSeconds()*6-90;
				//时针
				drawPointer(55,h,4,'#000');
				//分针
				drawPointer(65,m,3,'#888');
				//秒针
				drawPointer(75,s,2,'#ff0000');
					
		},1000);

		//画针函数
		function drawPointer (raduis,angle,width,color){
			cobj.strokeStyle = color;
			cobj.lineWidth = width;

			cobj.beginPath();
			cobj.moveTo(originx,originy);
			cobj.lineTo(originx+raduis*Math.cos(angle*Math.PI/180),originy+raduis*Math.sin(angle*Math.PI/180));
			cobj.stroke();
		}

		//画刻度函数
		function drakMark(){
			for(var i=0; i<60; i++){
				var angle = i*6*Math.PI/180;
				var raduis1 = raduis - 4;
				var lw = 2;
				if(i%5 == 0){
					raduis1 = raduis - 8;
					lw = 4;
				}

				cobj.strokeStyle = '#888';
				cobj.lineWidth = lw;
				cobj.beginPath();
				cobj.moveTo(originx+raduis*Math.cos(angle),originy+raduis*Math.sin(angle));
				cobj.lineTo(originx+(raduis1)*Math.cos(angle),originy+(raduis1)*Math.sin(angle));
				cobj.stroke();
			}
		}










	}


</script>
</body>
</html>
