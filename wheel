<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>wheel</title>
<style>
	canvas {background: #eee;}
</style>
</head>
<body>

<canvas id="canvas" width="500" height="500">
	你的浏览器out啦！
</canvas>
<input id="btn" type="button" value="开始">


<script type="text/javascript">
	window.onload = function(){
		var btn = document.getElementById('btn');
		btn.onclick = function(){
			location.reload();
		}

		var canvas = document.getElementById('canvas');
		var cobj = canvas.getContext('2d');
		cobj.translate(250,250);
		var color = ['#24a274','#b442c9','#cc1cca','#bcea4e','#a27d0e','#0b19d3','#5dfaaa','#cf3b0e'];
		var text = ['js','html','css','php','mysql','html5','css3','nodejs'];

		var angle = 0;
		var step = 10 + 10*Math.random();

		var t=setInterval(function(){
			document.title = step;
			if(step <= 0.3){
				clearInterval(t);
				var num1 = Math.ceil(angle/45);
				var con = text[text.length - num1];
				cobj.font = '18px 微软雅黑';
				cobj.textAlign = 'center';
				cobj.fillText(con,0,0);
			}else{
				
				step*=0.95;
				angle+=step;

				cobj.clearRect(-200,-200,500,500);

				//中间圆环文字
				cobj.beginPath();
				cobj.lineWidth = 5;
				cobj.moveTo(135,0);
				cobj.lineTo(150,0);
				cobj.stroke();

				cobj.lineWidth = 2;
				cobj.save();
				cobj.rotate(angle*Math.PI/180);


				//扇形
				for (var i=1; i<=8; i++) {
					cobj.beginPath();
					cobj.moveTo(0,0);
					cobj.fillStyle = color[i-1];
					cobj.strokeStyle = '#000';
					cobj.arc(0,0,130,(i-1)*45*Math.PI/180,i*45*Math.PI/180);
					cobj.closePath();
					cobj.stroke();
					cobj.fill();
				}
				
				//中间白色圆环
				cobj.beginPath();
				cobj.fillStyle = "#fff";
				cobj.arc(0,0,60,0,360);
				cobj.fill();

				//文字
				for (var i = 0; i < 8; i++) {
					cobj.save();
					cobj.beginPath();
					cobj.rotate((i*45+23)*Math.PI/180);
					cobj.fillStyle = '#000';
					cobj.font = '15px 微软雅黑';
					cobj.fillText(text[i],75,0);
					cobj.restore();
				}
			}
			cobj.restore();

		},60)

	}

</script>
	
</body>
</html>
